---
import { getRelativeLocaleUrl } from 'astro:i18n';
import LanguageSwitcher  from './LanguageSwitcher.astro';
// exclude homepage link from nav in homepage. ( /fr || /fr/ ) checks for both with our without slash pathname.
const isHome = Astro.url.pathname === getRelativeLocaleUrl(Astro.currentLocale) || Astro.url.pathname === getRelativeLocaleUrl(Astro.currentLocale).replace(/\/$/, "");

const navItems = [
  { href: getRelativeLocaleUrl(Astro.currentLocale, '/'), text: 'Beverse' },
  { href: getRelativeLocaleUrl(Astro.currentLocale, '/brands'), text: 'Brands' },
  { href: getRelativeLocaleUrl(Astro.currentLocale, '/about'), text: 'About' },
];

const filteredNavItems = isHome ? navItems.slice(1) : navItems;

const { logo } = Astro.props;
---

<header class="col-start-2 p-4 border-x border-border">
  <div class="grid grid-cols-2">
    <img src={logo.url} alt={logo.alt} />
    <div class="flex justify-end gap-4">
      <nav>
        <ul class="flex justify-end gap-4">
          {filteredNavItems.map((item) => (
            <li>
              <a href={item.href} class="rounded-sm bg-card px-2 py-1 text-xs select-none uppercase">
                {item.text}
              </a>
            </li>
          ))}
        </ul>
      </nav>
      <div class="flex gap-7">
        <LanguageSwitcher />
      </div>
    </div>
  </div>
</header>
